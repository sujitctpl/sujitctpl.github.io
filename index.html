<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Football Questionnaire</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS & JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5 mb-5">
    <div class="card shadow">
        <div class="card-body">
            <h2 class="mb-4">Football Questionnaire</h2>
            
            <!-- Form Type Selection -->
            <div id="formTypeSelection" class="mb-4">
                <h4 class="mb-3">Please select the type of questionnaire:</h4>
                <div class="d-grid gap-2 d-md-block">
                    <button type="button" class="btn btn-primary btn-lg me-3" onclick="showForm('coach')">Coach Questionnaire</button>
                    <button type="button" class="btn btn-success btn-lg" onclick="showForm('player')">Player Questionnaire</button>
                </div>
            </div>

            <!-- Coach Form -->
            <form id="coachForm" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="text-primary">Coach Questionnaire</h3>
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="showFormSelection()">← Back to Selection</button>
                </div>

                <!-- 1. Positions -->
                <div class="mb-3">
                    <label class="form-label fw-bold">1. Which position(s) do you coach?</label>
                    <div class="row">
                        {% for pos in [
                            "Quarterback","Running Back","Wide Receiver","Tight End",
                            "Offensive Line","Defensive Line","Linebacker","Cornerback",
                            "Safety","Kicker/Punter (Special Teams)","Long Snapper"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="positions" id="coach-pos-{{loop.index}}" value="{{pos}}">
                                <label class="form-check-label" for="coach-pos-{{loop.index}}">{{pos}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 2. Skill areas -->
                <div class="mb-3">
                    <label class="form-label fw-bold">2. Which skill areas do you specialize in coaching?</label>
                    <div class="row">
                        {% for skill in [
                            "Speed & Agility","Strength & Conditioning","Fundamentals (Tackling, Blocking, etc.)","Footwork",
                            "Passing/Throwing","Catching","Route Running","Defensive Techniques",
                            "Game IQ/Strategy","Position-Specific Skills","Injury Prevention","Mental Preparation"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="skills" id="coach-skill-{{loop.index}}" value="{{skill}}">
                                <label class="form-check-label" for="coach-skill-{{loop.index}}">{{skill}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 3. Coaching style (single) -->
                <div class="mb-3">
                    <label class="form-label fw-bold">3. How would you describe your coaching style?</label>
                    {% for style in [
                        "Supportive and encouraging",
                        "Motivational and challenging",
                        "Detailed and technical instruction",
                        "Structured and disciplined",
                        "Flexible and adaptive"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="coaching_style" id="coach-style-{{loop.index}}" value="{{style}}" required>
                        <label class="form-check-label" for="coach-style-{{loop.index}}">{{style}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 4. Age groups -->
                <div class="mb-3">
                    <label class="form-label fw-bold">4. Which age group(s) do you coach?</label>
                    <div class="row">
                        {% for age in [
                            "Under 10","10–12","13–15","16–18","19–22","23 and older"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="age_groups" id="coach-age-{{loop.index}}" value="{{age}}">
                                <label class="form-check-label" for="coach-age-{{loop.index}}">{{age}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 5. Experience level -->
                <div class="mb-3">
                    <label class="form-label fw-bold">5. Which player experience level(s) do you coach?</label>
                    <div class="row">
                        {% for level in [
                            "Beginner (new to the sport)","Recreational (casual/league play)","School/Club Team",
                            "Varsity/College","Competitive/Elite"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="experience_levels" id="coach-level-{{loop.index}}" value="{{level}}">
                                <label class="form-check-label" for="coach-level-{{loop.index}}">{{level}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 6. Outcomes -->
                <div class="mb-3">
                    <label class="form-label fw-bold">6. What coaching outcomes do you help athletes achieve?</label>
                    <div class="row">
                        {% for outcome in [
                            "Improve basic skills","Prepare for tryouts","Get recruited for college",
                            "Enhance physical fitness","Recover from injury","Build confidence",
                            "Compete at a higher level"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="outcomes" id="coach-outcome-{{loop.index}}" value="{{outcome}}">
                                <label class="form-check-label" for="coach-outcome-{{loop.index}}">{{outcome}}</label>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="outcomes" id="coach-outcome-other">
                                <label class="form-check-label" for="coach-outcome-other">Other:</label>
                                <input type="text" class="form-control mt-1" name="other_outcome" placeholder="Specify other" style="max-width: 90%;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7. Coaching type -->
                <div class="mb-3">
                    <label class="form-label fw-bold">7. Do you offer individual or group/team coaching?</label>
                    <div class="row">
                        {% for ctype in [
                            "Individual (one-on-one)","Small group","Full team"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="coaching_types" id="coach-ctype-{{loop.index}}" value="{{ctype}}">
                                <label class="form-check-label" for="coach-ctype-{{loop.index}}">{{ctype}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 8. Travel distance -->
                <div class="mb-3">
                    <label class="form-label fw-bold">8. How far are you willing to travel for in-person sessions?</label>
                    {% for dist in [
                        "Up to 10 miles","Up to 25 miles","Up to 50 miles","Local only"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="travel_distance" id="coach-dist-{{loop.index}}" value="{{dist}}" required>
                        <label class="form-check-label" for="coach-dist-{{loop.index}}">{{dist}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 9. Price range -->
                <div class="mb-3">
                    <label class="form-label fw-bold">9. What is your typical price range per session?</label>
                    {% for price in [
                        "Under $30","$30–$60","$61–$100","Over $100"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="price_range" id="coach-price-{{loop.index}}" value="{{price}}" required>
                        <label class="form-check-label" for="coach-price-{{loop.index}}">{{price}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 10. Coaching format -->
                <div class="mb-3">
                    <label class="form-label fw-bold">10. What coaching format(s) do you offer?</label>
                    <div class="row">
                        {% for fmt in [
                            "In-person","Online (virtual)","Hybrid (both in-person and online)"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="coaching_formats" id="coach-fmt-{{loop.index}}" value="{{fmt}}">
                                <label class="form-check-label" for="coach-fmt-{{loop.index}}">{{fmt}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 11. Safety certifications -->
                <div class="mb-3">
                    <label class="form-label fw-bold">11. Do you hold current safety certifications? (Select all that apply)</label>
                    <div class="row">
                        {% for cert in [
                            "CPR Certification","First Aid Certification","USA Football Heads Up Certification",
                            "Concussion Protocol Training","Youth Protection Training","None of the above"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="safety_certs" id="coach-cert-{{loop.index}}" value="{{cert}}">
                                <label class="form-check-label" for="coach-cert-{{loop.index}}">{{cert}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 12. US States -->
                <div class="mb-3">
                    <label class="form-label fw-bold">12. In which state(s) do you provide coaching services? (Select all that apply)</label>
                    <div class="row">
                        {% set states = [
                            "Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut",
                            "Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas",
                            "Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota",
                            "Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey",
                            "New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon",
                            "Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas",
                            "Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming","Washington D.C."
                        ] %}
                        {% for state in states %}
                        <div class="col-md-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="states" id="coach-state-{{loop.index}}" value="{{state}}">
                                <label class="form-check-label" for="coach-state-{{loop.index}}">{{state}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <input type="hidden" name="form_type" value="coach">
                <button type="submit" class="btn btn-primary mt-3">Submit Coach Form</button>
                <div id="coachFormResult" class="mt-4"></div>
            </form>

            <!-- Player Form -->
            <form id="playerForm" style="display: none;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="text-success">Player Questionnaire</h3>
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="showFormSelection()">← Back to Selection</button>
                </div>

                <!-- 1. Positions -->
                <div class="mb-3">
                    <label class="form-label fw-bold">1. Which position(s) do you want coaching for?</label>
                    <div class="row">
                        {% for pos in [
                            "Quarterback","Running Back","Wide Receiver","Tight End",
                            "Offensive Line","Defensive Line","Linebacker","Cornerback",
                            "Safety","Kicker/Punter (Special Teams)","Long Snapper"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="positions" id="player-pos-{{loop.index}}" value="{{pos}}">
                                <label class="form-check-label" for="player-pos-{{loop.index}}">{{pos}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 2. Skill areas -->
                <div class="mb-3">
                    <label class="form-label fw-bold">2. Which skill areas do you want to focus on?</label>
                    <div class="row">
                        {% for skill in [
                            "Speed & Agility","Strength & Conditioning","Fundamentals (Tackling, Blocking, etc.)","Footwork",
                            "Passing/Throwing","Catching","Route Running","Defensive Techniques",
                            "Game IQ/Strategy","Position-Specific Skills","Injury Prevention","Mental Preparation"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="skills" id="player-skill-{{loop.index}}" value="{{skill}}">
                                <label class="form-check-label" for="player-skill-{{loop.index}}">{{skill}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 3. Coaching style (single) -->
                <div class="mb-3">
                    <label class="form-label fw-bold">3. What coaching style works best for you?</label>
                    {% for style in [
                        "Supportive and encouraging",
                        "Motivational and challenging",
                        "Detailed and technical instruction",
                        "Structured and disciplined",
                        "Flexible and adaptive",
                        "Not sure"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="coaching_style" id="player-style-{{loop.index}}" value="{{style}}" required>
                        <label class="form-check-label" for="player-style-{{loop.index}}">{{style}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 4. Age group -->
                <div class="mb-3">
                    <label class="form-label fw-bold">4. What is your age group?</label>
                    {% for age in [
                        "Under 10","10–12","13–15","16–18","19–22","23 and older"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="age_group" id="player-age-{{loop.index}}" value="{{age}}" required>
                        <label class="form-check-label" for="player-age-{{loop.index}}">{{age}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 5. Experience level -->
                <div class="mb-3">
                    <label class="form-label fw-bold">5. What is your current experience level in football?</label>
                    {% for level in [
                        "Beginner (new to the sport)","Recreational (casual/league play)","School/Club Team",
                        "Varsity/College","Competitive/Elite"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="experience_level" id="player-level-{{loop.index}}" value="{{level}}" required>
                        <label class="form-check-label" for="player-level-{{loop.index}}">{{level}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 6. Goals -->
                <div class="mb-3">
                    <label class="form-label fw-bold">6. What are your main goals for coaching?</label>
                    <div class="row">
                        {% for goal in [
                            "Improve basic skills","Prepare for tryouts","Get recruited for college",
                            "Enhance physical fitness","Recover from injury","Build confidence",
                            "Compete at a higher level"
                        ] %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="goals" id="player-goal-{{loop.index}}" value="{{goal}}">
                                <label class="form-check-label" for="player-goal-{{loop.index}}">{{goal}}</label>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="goals" id="player-goal-other">
                                <label class="form-check-label" for="player-goal-other">Other:</label>
                                <input type="text" class="form-control mt-1" name="other_goal" placeholder="Specify other" style="max-width: 90%;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7. Coaching type -->
                <div class="mb-3">
                    <label class="form-label fw-bold">7. Are you looking for individual or group/team coaching?</label>
                    {% for ctype in [
                        "Individual (one-on-one)","Small group","Full team"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="coaching_type" id="player-ctype-{{loop.index}}" value="{{ctype}}" required>
                        <label class="form-check-label" for="player-ctype-{{loop.index}}">{{ctype}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 8. Travel willingness -->
                <div class="mb-3">
                    <label class="form-label fw-bold">8. Are you willing to travel for in-person sessions?</label>
                    {% for travel in [
                        "Yes, up to 10 miles","Yes, up to 25 miles","Yes, up to 50 miles","No, sessions must be local only"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="travel_willingness" id="player-travel-{{loop.index}}" value="{{travel}}" required>
                        <label class="form-check-label" for="player-travel-{{loop.index}}">{{travel}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 9. Price range -->
                <div class="mb-3">
                    <label class="form-label fw-bold">9. What is your preferred price range per session?</label>
                    {% for price in [
                        "Under $30","$30–$60","$61–$100","Over $100","No preference"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="price_range" id="player-price-{{loop.index}}" value="{{price}}" required>
                        <label class="form-check-label" for="player-price-{{loop.index}}">{{price}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 10. Coaching format -->
                <div class="mb-3">
                    <label class="form-label fw-bold">10. What type of coaching format do you prefer?</label>
                    {% for fmt in [
                        "In-person","Online (virtual)","Hybrid (both in-person and online)"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="coaching_format" id="player-fmt-{{loop.index}}" value="{{fmt}}" required>
                        <label class="form-check-label" for="player-fmt-{{loop.index}}">{{fmt}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 11. Safety certifications requirement -->
                <div class="mb-3">
                    <label class="form-label fw-bold">11. Do you require your coach to have safety certifications?</label>
                    {% for req in [
                        "Yes, safety certifications are required","Preferred but not required","Not important to me"
                    ] %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="safety_requirement" id="player-safety-{{loop.index}}" value="{{req}}" required>
                        <label class="form-check-label" for="player-safety-{{loop.index}}">{{req}}</label>
                    </div>
                    {% endfor %}
                </div>

                <!-- 12. US States -->
                <div class="mb-3">
                    <label class="form-label fw-bold">12. In which state(s) are you available to take coaching? (Select all that apply)</label>
                    <div class="row">
                        {% set states = [
                            "Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut",
                            "Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas",
                            "Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota",
                            "Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey",
                            "New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon",
                            "Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas",
                            "Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming","Washington D.C."
                        ] %}
                        {% for state in states %}
                        <div class="col-md-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="states" id="player-state-{{loop.index}}" value="{{state}}">
                                <label class="form-check-label" for="player-state-{{loop.index}}">{{state}}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <input type="hidden" name="form_type" value="player">
                <button type="submit" class="btn btn-success mt-3">Submit Player Form</button>
                <div id="playerFormResult" class="mt-4"></div>
            </form>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- JQuery for AJAX -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
function showForm(formType) {
    document.getElementById('formTypeSelection').style.display = 'none';
    if (formType === 'coach') {
        document.getElementById('coachForm').style.display = 'block';
        document.getElementById('playerForm').style.display = 'none';
    } else {
        document.getElementById('playerForm').style.display = 'block';
        document.getElementById('coachForm').style.display = 'none';
    }
}

function showFormSelection() {
    document.getElementById('formTypeSelection').style.display = 'block';
    document.getElementById('coachForm').style.display = 'none';
    document.getElementById('playerForm').style.display = 'none';
    // Reset forms
    document.getElementById('coachForm').reset();
    document.getElementById('playerForm').reset();
    // Clear results
    document.getElementById('coachFormResult').innerHTML = '';
    document.getElementById('playerFormResult').innerHTML = '';
}

function handleFormSubmit(formId, resultId) {
    $(`#${formId}`).submit(function(event){
        event.preventDefault();
        var formData = $(this).serializeArray();
        var data = {};
        // Support multiple values for checkboxes
        formData.forEach(function(x) {
            if (data[x.name]) {
                if(Array.isArray(data[x.name])) {
                    data[x.name].push(x.value);
                } else {
                    data[x.name] = [data[x.name], x.value];
                }
            } else {
                data[x.name] = x.value;
            }
        });
        
        // Handle "Other" fields
        if (formId === 'coachForm') {
            if($("#coach-outcome-other").is(":checked")) {
                if(data["other_outcome"] && data["other_outcome"].trim() !== "") {
                    if(!data["outcomes"]) data["outcomes"] = [];
                    else if(typeof data["outcomes"] === "string") data["outcomes"] = [data["outcomes"]];
                    data["outcomes"].push(data["other_outcome"]);
                }
            }
            delete data["other_outcome"];
        } else if (formId === 'playerForm') {
            if($("#player-goal-other").is(":checked")) {
                if(data["other_goal"] && data["other_goal"].trim() !== "") {
                    if(!data["goals"]) data["goals"] = [];
                    else if(typeof data["goals"] === "string") data["goals"] = [data["goals"]];
                    data["goals"].push(data["other_goal"]);
                }
            }
            delete data["other_goal"];
        }
        
        $.post("/submit", data, function(response){
            if(response.success){
                $(`#${resultId}`).html(
                    `<div class="alert alert-success">Thank you! Your response has been recorded.</div>`
                );
                $(`#${formId}`)[0].reset();
            } else {
                $(`#${resultId}`).html(
                    `<div class="alert alert-danger">Error saving response. Please try again.</div>`
                );
            }
        });
    });
}

// Initialize form handlers
$(document).ready(function() {
    handleFormSubmit('coachForm', 'coachFormResult');
    handleFormSubmit('playerForm', 'playerFormResult');
});
</script>
</body>
</html>
